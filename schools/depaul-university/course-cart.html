<!DOCTYPE html>
<html>
	<head>
		<title>MockSched - Course Cart</title>
		<meta charset="UTF-8">
		<link rel="shortcut icon" href="../../icon.png">

		<link rel="stylesheet" href="../../css/fullcalendar.css" />
		<link rel="stylesheet" href="../../css/fullcalendar.print.css" media="print" />
		<link rel="stylesheet" href="../../css/tipuesearch.css" />
		<link rel="stylesheet" href="../../css/stylesheet.css" />
		<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400|Merriweather:300,300italic" />
        <link href="http://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.css" rel="stylesheet"/>
        <script src='../../js/jquery.min.js'></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.full.js"></script>
		<script src='../../js/moment.min.js'></script>
		<script src='../../js/fullcalendar.min.js'></script>
		<script src="../../js/jquery.tablesorter.min.js"></script>
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','http://www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-70030211-1', 'auto');
			ga('send', 'pageview');
	 	</script>
	</head>
<body>
	<div>
		<span>
			<h3>
				<a href="course-cart.html" style="text-decoration:none; float:right; color:#333;">Course Cart</a>
			</h3>
		</span>
		<span>
		<h1 style="float:left; padding: 0px; padding-right:2%;"><a href="search.html" style="text-decoration:none; color:#333;">MockSched</a></h1>
		<div style="display: inline-block; padding-right:10px">
			<select class="prefix">
				<option value="ACC">ACC - Accountancy</option>
				<option value="A&amp;S">A&amp;S - Administration &amp; Supervision</option>
				<option value="ABD">ABD - African&amp;Black Diaspora Studies</option>
				<option value="AHT">AHT - Allied Health Technology</option>
				<option value="ASL">ASL - American Sign Language</option>
				<option value="AMS">AMS - American Studies</option>
				<option value="ANI">ANI - Animation</option>
				<option value="ANT">ANT - Anthropology</option>
				<option value="APB">APB - Applied Brass</option>
				<option value="APK">APK - Applied Keyboard</option>
				<option value="APM">APM - Applied Music</option>
				<option value="APP">APP - Applied Percussion</option>
				<option value="AP">AP - Applied Professional Studies</option>
				<option value="APS">APS - Applied Strings</option>
				<option value="AT">AT - Applied Technology</option>
				<option value="APV">APV - Applied Voice</option>
				<option value="APW">APW - Applied Woodwinds</option>
				<option value="ARB">ARB - Arabic</option>
				<option value="ART">ART - Art</option>
				<option value="HAA">HAA - Art And Architecture, History Of</option>
				<option value="AI">AI - Arts And Ideas</option>
				<option value="BBE">BBE - Bilingual-Bicultural Education</option>
				<option value="BIO">BIO - Biological Sciences</option>
				<option value="BLW">BLW - Business Law</option>
				<option value="CTH">CTH - Catholic Studies</option>
				<option value="CTU">CTU - Catholic Theological Union</option>
				<option value="CHE">CHE - Chemistry</option>
				<option value="CHN">CHN - Chinese</option>
				<option value="CMN">CMN - Communication</option>
				<option value="CMNS">CMNS - Communication Studies</option>
				<option value="CSS">CSS - Community Service Studies</option>
				<option value="CPL">CPL - Comparative Literature</option>
				<option value="COM">COM - Composition</option>
				<option value="GPH">GPH - Computer Graphics &amp; Motion Technology</option>
				<option value="CSC">CSC - Computer Science</option>
				<option value="CNS">CNS - Computer, Information And Network Security</option>
				<option value="CCA">CCA - Core Curriculum Arts And Ideas</option>
				<option value="CCH">CCH - Core Curriculum Human Community</option>
				<option value="CCS">CCS - Core Curriculum Scientific World</option>
				<option value="CSL">CSL - Counseling</option>
				<option value="CES">CES - Critical Ethnic Studies</option>
				<option value="CS">CS - Curriculum Studies</option>
				<option value="DA">DA - Decision Analytics</option>
				<option value="DES">DES - Design</option>
				<option value="DC">DC - Digital Cinema</option>
				<option value="DHS">DHS - Digital Humanities</option>
				<option value="DMA">DMA - Digital Media Arts</option>
				<option value="ECE">ECE - Early Childhood Education</option>
				<option value="ECT">ECT - E-Commerce Technology</option>
				<option value="ECO">ECO - Economics</option>
				<option value="EA">EA - Educating Adults</option>
				<option value="EDU">EDU - Education - General</option>
				<option value="EE">EE - Elementary Education</option>
				<option value="ENG">ENG - English</option>
				<option value="ELA">ELA - English Language Academy</option>
				<option value="ENV">ENV - Environmental Science</option>
				<option value="EXP">EXP - Experience Design</option>
				<option value="FIN">FIN - Finance</option>
				<option value="FA">FA - Focus Area</option>
				<option value="FCH">FCH - French</option>
				<option value="GAM">GAM - Game Development</option>
				<option value="GEO">GEO - Geography</option>
				<option value="GER">GER - German</option>
				<option value="AAS">AAS - Global Asian Studies</option>
				<option value="GSB">GSB - Graduate School Of Business</option>
				<option value="GD">GD - Graphic Design</option>
				<option value="GRK">GRK - Greek</option>
				<option value="HTHC">HTHC - Health Communication</option>
				<option value="HIT">HIT - Health Information Technology</option>
				<option value="HLTH">HLTH - Health Science</option>
				<option value="HST">HST - History</option>
				<option value="HON">HON - Honors</option>
				<option value="HSP">HSP - Hospitality Leadership</option>
				<option value="HCD">HCD - Human Centered Design</option>
				<option value="HC">HC - Human Community</option>
				<option value="HCI">HCI - Human-Computer Interaction</option>
				<option value="ICE">ICE - Illinois Institute Of Technology</option>
				<option value="ILL">ILL - Illustration</option>
				<option value="IS">IS - Information Systems</option>
				<option value="IT">IT - Information Technology</option>
				<option value="IPD">IPD - Institute For Professional Development</option>
				<option value="IN">IN - Integrative Learning</option>
				<option value="ISM">ISM - Interactive And Social Media</option>
				<option value="IM">IM - Interactive Media</option>
				<option value="INTC">INTC - Intercultural Communication</option>
				<option value="ICS">ICS - Interdisciplinary Commerce Studies</option>
				<option value="IDS">IDS - Interdisciplinary Studies</option>
				<option value="ISP">ISP - Interdisciplinary Studies Program</option>
				<option value="IB">IB - International Business</option>
				<option value="INT">INT - International Studies</option>
				<option value="IRE">IRE - Irish Studies</option>
				<option value="IWS">IWS - Islamic World Studies</option>
				<option value="ITA">ITA - Italian</option>
				<option value="JPN">JPN - Japanese</option>
				<option value="JZZ">JZZ - Jazz Studies</option>
				<option value="JOUR">JOUR - Journalism</option>
				<option value="LE">LE - Labor Education</option>
				<option value="LAT">LAT - Latin</option>
				<option value="LST">LST - LatinAmerican &amp; Latino Studies</option>
				<option value="LAW">LAW - Law</option>
				<option value="LGQ">LGQ - Lesbian, Gay, Bisexual, Transgender, Queer Studies</option>
				<option value="LLS">LLS - Liberal Learning Seminars</option>
				<option value="LSE">LSE - Liberal Studies In Education</option>
				<option value="LSP">LSP - Liberal Studies Program</option>
				<option value="LL">LL - Lifelong Learning</option>
				<option value="LSI">LSI - Literacy &amp; Specialized Instruction</option>
				<option value="MGT">MGT - Management</option>
				<option value="MIS">MIS - Management Information Systems</option>
				<option value="MKT">MKT - Marketing</option>
				<option value="MPH">MPH - Master Of Public Health</option>
				<option value="MSW">MSW - Masters In Social Work</option>
				<option value="MLS">MLS - Masters Of Liberal Studies</option>
				<option value="MAT">MAT - Mathematical Sciences</option>
				<option value="MMT">MMT - Mathematics For Middle School Teaching</option>
				<option value="MCS">MCS - Media Studies</option>
				<option value="MGE">MGE - Middle Grades Education</option>
				<option value="MSC">MSC - Military Science</option>
				<option value="MOL">MOL - Modern Languages</option>
				<option value="MED">MED - Music Education</option>
				<option value="MEN">MEN - Music Ensemble</option>
				<option value="MUS">MUS - Musicianship</option>
				<option value="NMS">NMS - New Media Studies</option>
				<option value="NSG">NSG - Nursing</option>
				<option value="ORGC">ORGC - Organizational Communication</option>
				<option value="PAX">PAX - Peace, Justice And Conflict Studies</option>
				<option value="PRF">PRF - Performance</option>
				<option value="PAM">PAM - Performing Arts Management</option>
				<option value="PHL">PHL - Philosophy</option>
				<option value="PE">PE - Physical Education</option>
				<option value="PHY">PHY - Physics</option>
				<option value="POL">POL - Polish</option>
				<option value="PSC">PSC - Political Science</option>
				<option value="POR">POR - Portuguese</option>
				<option value="PM">PM - Project Management</option>
				<option value="PSY">PSY - Psychology</option>
				<option value="PPS">PPS - Public Policy Studies</option>
				<option value="PRAD">PRAD - Public Relations And Advertising</option>
				<option value="MPS">MPS - Public Services</option>
				<option value="RE">RE - Real Estate</option>
				<option value="FMS">FMS - Refugee And Forced Migration Studies</option>
				<option value="RELC">RELC - Relational Communication</option>
				<option value="REL">REL - Religious Studies</option>
				<option value="RUS">RUS - Russian</option>
				<option value="STEM">STEM - Science, Technology, Engineering And Math</option>
				<option value="SW">SW - Scientific World</option>
				<option value="SEC">SEC - Secondary Education</option>
				<option value="DCM">DCM - SNL Degree Completion Major</option>
				<option value="SNC">SNC - SNL Liberal Studies</option>
				<option value="SCG">SCG - Social &amp; Cultural Studies Ed Human Dev Grad</option>
				<option value="SCU">SCU - Social/Cultural Studies Education/Human Dev Ugrd</option>
				<option value="SOC">SOC - Sociology</option>
				<option value="SE">SE - Software Engineering</option>
				<option value="REC">REC - Sound Recording Technology</option>
				<option value="SPN">SPN - Spanish</option>
				<option value="SEV">SEV - Strategy Execution Valuation</option>
				<option value="SAP">SAP - Study Abroad Program</option>
				<option value="SUD">SUD - Sustainable Urban Development</option>
				<option value="TCH">TCH - TEACH Program</option>
				<option value="T&amp;L">T&amp;L - Teaching And Learning</option>
				<option value="TDC">TDC - Telecommunications</option>
				<option value="TV">TV - Television Production</option>
				<option value="THE">THE - Theatre Studies</option>
				<option value="TEC">TEC - Theatre Technology</option>
				<option value="UIP">UIP - University Internship Program</option>
				<option value="VFX">VFX - Visual Effects</option>
				<option value="WGS">WGS - Women's And Gender Studies</option>
				<option value="WLE">WLE - World Language Education</option>
				<option value="MWR">MWR - Writing</option>
				<option value="WRD">WRD - Writing Rhetoric And Discourse</option>
			</select>
		</div>
		<div style="display: inline-block; padding-right:10px">
			<input type="text" class="number inputbox" placeholder="NUMBER">
		</div>
		<div style="display: inline-block;">
			<div style="style=padding: 5%;">
				<form onsubmit="submitForm()" action="search.html" id="field">
					<input class="inputbox" type="hidden" name="q" id="tipue_search_input" autocomplete="off" required value="">
					<input class="inputbox" type="submit" value="SEARCH">
				</form>
			</div>
		</div>
	</span>
	</div>
	<br />
	<hr>
	<button class="generate" id="search" style="top:-20px; align: center;">ADVANCED SEARCH</button>
	<div class="center">
		<div style="padding-bottom: 1%;">
			<a href="course-cart.html" style="text-decoration:none; color:#333;">
				<h1>Course Cart</h1>
			</a>
			<h3>DePaul University</h3>
		</div>
		<div id="empty">
			<h2>Your course cart is currently empty. Search for courses <a href="search.html" style="color: #333;">here.</a></h2>
		</div>
		<div id="body"></div>
		<div style="padding: 2%;">
			<button class="generate" id="mocksched" onclick="createCalendarData()" style="visibility: hidden; font: 300 15px 'Open Sans', sans-serif;">Generate Mock Schedule</button>
		</div>
		<div>
			<div class="calendar" id="calendar" style="padding-top:1%; visibility: hidden"></div>
		</div>
	</div>
	<div class="center ital" style="padding: 2%;">Contact the <a href="mailto:mocksched@gmail.com?subject=MockSched">Developer</a></div>
</body>
<script>
	formatCookies()
	$("#myTable").tablesorter({sortInitialOrder: 'desc'});
	function formatCookies()
	{
		classes = []
		html = ''
		for (i of document.cookie.split(';'))
		{
			if(i.indexOf('-add')!=-1) 
			{
				temp = i.substring(i.indexOf('=')+1).split(',')
				if(temp.length==11) temp = ('0.0,' + temp).split(',')
				classes.push(temp)
			}
		}

		document.getElementById('mocksched').style.visibility='hidden';
		document.getElementsByClassName('calendar')[0].style.visibility='hidden';
		document.getElementById('empty').innerHTML = '<h2>Your course cart is currently empty. Search for courses <a href="search.html" style="color: #333;">here.</a></h2>'

		if (classes.length > 0)
		{
			document.getElementById('mocksched').style.visibility='visible';
			document.getElementById('empty').innerHTML = ''
			html = '<table id="myTable" class="tablesorter">'
			html += '<thead><tr><th class="header">Remove</th><th class="header">Course</th><th class="header">Overall Rating</th><th class="header">Class Status</th><th class="header">Credit Hours</th><th class="header">Teacher First Name</th><th class="header">Teacher Last Name</th><th class="header">Class Start Time</th><th class="header">Class End Time</th><th class="header">Class Section</th><th class="header">Class Number</th><th class="header">Location</th><th class="header">Days</th></tr></thead><tbody>'

			for (i of classes)
			{
				classValue = i[4].toLowerCase() + '-' + i[5].toLowerCase() + '-add'
				html += '<tr class=course><td><input class="' + classValue + '" id="' + i.join(',') + '" type="image" src="../../minus.png" width="20" onclick="removeFromCart(this)"></td>'
				href = 'teachers/' + i[4].toLowerCase()+'-'+i[5].toLowerCase() + '.html'
				if (i[0] == '0.0') 
				{
					course_name = 'classes/'+i[1].replace(' ','-').toLowerCase() + '.html'
					html += '<td><a class="name" style="text-decoration: none;" href="' + course_name + '">' + i[1] + '</a></td>'
					html += '<td class="overall">' + i[0] + '</td>'
					html += '<td class="status">' + i[2] + '</td>'
			    	html += '<td class="hours">' + i[3] + '</td>'
			    	html += '<td class="fname">' + i[4] + '</td>'
			    	html += '<td class="lname">' + i[5] + '</td>'
				}
		    	else 
		    	{
		    		course_name = 'classes/' + i[1].replace(' ','-').toLowerCase() + '.html'
		    		html += '<td><a class="name" style="text-decoration: none;" href="' + course_name + '">' + i[1] + '</a></td>'
		    		html += '<td><a class="overall" style="text-decoration:none;" href="' + href + '">' + i[0] + '</a></td>'
		    		html += '<td class="status">' + i[2] + '</td>'
			    	html += '<td class="hours">' + i[3] + '</td>'
			    	html += '<td><a class="fname" style="text-decoration:none;" href="' + href + '">' + i[4] + '</td>'	
			    	html += '<td><a class="lname" style="text-decoration:none;" href="' + href + '">' + i[5] + '</td>'	
		    	}
		    	html += '<td class="start">' + i[6] + '</td>'
		    	html += '<td class="end">' + i[7] + '</td>'
		    	html += '<td class="section">' + i[8] + '</td>'
		    	html += '<td class="number">' + i[9] + '</td>'
		    	html += '<td class="location">' + i[10] + '</td>'
		    	html += '<td class="days">' + i[11] + '</td>'
				html += '</tr>'
			}
			html += '<tbody></table>'
		}

		document.getElementById('body').innerHTML = html
	}

	function removeFromCart(contents)
	{
		index = 9
		value = contents.getAttribute('id')
		if(value.split(',').length < 12) 
		{
			index = 8
		}
		className = contents.getAttribute('class')
		delete_cookie(className + '-' + value.split(',')[index])
		window.location.reload()
	}

	function delete_cookie(name) 
	{
  		document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
	}

	function createCalendar(events)
	{
		$('#calendar').fullCalendar({
			header: {
				left: 'prev,next today',
				center: 'title',
				right: 'month,agendaWeek'
			},
			defaultDate: '2016-01-04',
			selectable: true,
			selectHelper: true,
			defaultView: 'agendaWeek',
			select: function(start, end) {
				var title = prompt('Event Title:');
				var eventData;
				if (title) {
					eventData = {
						title: title,
						description: description,
						start: start,
						end: end,
						dow: dow
					};
					$('#calendar').fullCalendar('renderEvent', eventData, true);
				}
				$('#calendar').fullCalendar('unselect');
			},
			editable: false,
			eventLimit: true,
			selectable: false,
			events: events,
			eventRender: function (event, element, view) {
    			element.find('.fc-title').append('<div class="hr-line-solid-no-margin"></div><span style="font-size: 6px;">' + event.description + '</span></div>');
			},

		});

		$('html, body').animate({
    		scrollTop: $("#calendar").offset().top
		}, 1000);

	}

	function createCalendarData()
	{
		courses = document.getElementsByClassName("course");
		events = []
		for(var i = 0; i < courses.length; i++)
		{
			start = convertTime(courses[i].getElementsByClassName('start')[0].innerHTML)
			end = convertTime(courses[i].getElementsByClassName('end')[0].innerHTML)
			firstname = courses[i].getElementsByClassName('fname')[0].innerHTML
			lastname = courses[i].getElementsByClassName('lname')[0].innerHTML
			courseLocation = courses[i].getElementsByClassName('location')[0].innerHTML
			days = convertDays(courses[i].getElementsByClassName('days')[0].innerHTML)
			course = courses[i].getElementsByClassName('name')[0].innerHTML
			description = "Teacher: " + firstname + ' ' + lastname +"<br>" + "Location: " + courseLocation
			events.push({'title':course,'description':description,'start':start,'end':end,'dow':days})
		}
		createCalendar(events)
		document.getElementsByClassName('calendar')[0].style.visibility = 'visible';
	}

	function convertDays(days)
	{
		ret = []
		if (days.indexOf('M') != -1) ret.push(1)
		if (days.indexOf('Tu') != -1) ret.push(2)
		if (days.indexOf('W') != -1) ret.push(3)
		if (days.indexOf('Th') != -1) ret.push(4)
		if (days.indexOf('F') != -1) ret.push(5)
		if (days.indexOf('Sat') != -1) ret.push(6)
		return ret
	}

	function convertTime(time)
	{
		if(time=='TBD') return
		hours = time.split(' ')[0].split(':')[0]
		minutes = time.split(' ')[0].split(':')[1]
		if(time.split(' ')[1].toLowerCase() == 'pm' && time.split(' ')[0].split(':')[0].length < 2) 
		{
			hours = String(parseInt(hours)+12)
		}
		ret = hours+':'+minutes+':00'
		if (ret.length ==7) ret = '0' + ret
		return ret
	}
	function submitForm()
	{
		var prefix = document.getElementsByClassName('prefix')[0].value
		var number = document.getElementsByClassName('number')[0].value
		if(isNaN(number) == false)
		{
			search = prefix.toUpperCase() + ' ' + number
			document.getElementById('tipue_search_input').value = '"'+search+'"'
			document.getElementById('field').submit()
		}
	}
	function matchStart (term, text) 
	{
		if (text.toUpperCase().indexOf(term.toUpperCase()) == 0) 
		{
	    	return true;
	    }
    	return false;
	}
 
	$.fn.select2.amd.require(['select2/compat/matcher'], function (oldMatcher) 
	{
		$("select").select2({
	    	matcher: oldMatcher(matchStart)
	    })
	});

	$(".number").keyup(function (e) 
	{
	    if (e.keyCode == 13) 
	    {
	        submitForm()
	    }
	});

	$( document ).ready(function() {
    	$(".prefix").select2();
	});

</script>
<style>
	#calendar 
	{
		width: 75%;
		margin: 0 auto;
	}
</style>
</html>
